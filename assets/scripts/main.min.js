window.onload = (function startTime() {
    var today = new Date();
    var h = today.getUTCHours() + 1;
    var m = today.getMinutes();
    var s = today.getSeconds();
    var ampm = h >= 12 ? 'PM' : 'AM';
    h = h % 12;
    h = h ? h : 12; // the hour '0' should be '12'
    // add a zero in front of numbers greater than 10
    document.getElementById('time').innerHTML = "It is " +
        convertHourToName(h) + "â€“" + 
        convertNumberToName(m) + " and " + 
        convertNumberToName(s) + " seconds" + " " + ampm;
    setTimeout(startTime,300);

    function checkTime(i) {
        if (i < 10) {
            i = "0" + i;
        }
        return i;
    } 

    function convertHourToName(num) {
        if (num > 12) {
            num -= 12;
        }
        return convertNumberToName(num);
    }

    function convertNumberToName(num) {
        var lowNames = ["zero", "one", "two", "three", 
                      "four", "five", "six", "seven", "eight", "nine", 
                     "ten", "eleven", "twelve", "thirteen", "fourteen", 
                      "fifteen", "sixteen", "seventeen", 
                      "eighteen", "nineteen"];
        var tensNames = ["twenty", "thirty", "forty", "fifty", 
                    "sixty", "seventy", "eighty", "ninety"];
        var tens, ones, result;
        if (num < lowNames.length) {
            result = lowNames[num];
        } else {
            tens = Math.floor(num / 10);
            ones = num % 10;
            if (tens <= 9) {
                result = tensNames[tens - 2];
                if (ones > 0) {
                    result += "" + lowNames[ones];
                }
            } else {
                result = "unknown"
            }
        }
        return result;
    }
});
// Navigation
$('#about').click(function(){
    $('.about').toggleClass('visible');
});

$('#clients').click(function(){
    $('.clients').toggleClass('visible');
});

$('#contact').click(function(){
    $('.contact').toggleClass('visible');
});

$(document).on('keydown', function(e) {
    if ( e.keyCode === 27 ) { // ESC
      if ( $('.about').hasClass('visible') )  {
			$('.about').removeClass('visible');
		}
		if ( $('.clients').hasClass('visible') )  {
			$('.clients').removeClass('visible');
		}
		if ( $('.contact').hasClass('visible') )  {
			$('.contact').removeClass('visible');
		}
    }
});
$(function() {
  var sliderJQ = $('.showcase__slider').royalSlider({
    autoScaleSlider: false,
    autoHeight: false,
    keyboardNavEnabled: true,
    deeplinking: {
      enabled: true,
      change: true,
      prefix: 'mut'
    },
    loopRewind: false,
    controlNavigation: 'none',
    arrowsNav: false,
  });

  var sliderInstance = sliderJQ.data('royalSlider');
  var slideCountEl = $('<div class="showcase__count rsSlideCount"></div>').appendTo( '.showcase' );

  function updCount() {
      slideCountEl.html( (sliderInstance.currSlideId+1) + '&nbsp;&nbsp;/&nbsp;&nbsp;' + sliderInstance.numSlides );
  }
  sliderInstance.ev.on('rsAfterSlideChange', updCount);
  sliderInstance.ev.on('rsAfterSlideChange', pauseAllVideos );
  updCount();

  var si = jQuery('.royalSlider').data('royalSlider');
  si.ev.on('rsBeforeMove', function(e, type, action) {
    console.log(si.currSlideId, type, si.numSlides);
    if(si.currSlideId+1 === si.numSlides) {
    // if(si.currSlideId+2 === si.numSlides) {
      $('.rsContainer').click(function() {
        $('a.showcase__close')[0].click();
      });

      $(document).on('keydown', function(e) {
        if ( e.keyCode === 39 ) { // ESC 
          $('a.showcase__close')[0].click();
        }
      });
    }
  });
});

function testTrigger() {
  $('a.showcase__close')[0].click();
}

window.onload = function() {
  var video = document.getElementById("video");
  var playButton = document.getElementById("play-pause");

  playButton.addEventListener("click", function() {
    if (video.paused == true) {
      // Play the video
      video.play();
      // Update the button text to 'Pause'
      playButton.innerHTML = "Pause";
    } else {
      // Pause the video
      video.pause();
      // Update the button text to 'Play'
      playButton.innerHTML = "Play";
    }
  });
}

function pauseAllVideos() {
  var video = document.getElementById("video");
  var playButton = document.getElementById("play-pause");
  video.pause();
  playButton.innerHTML = "Play";
}

$('.button').click(function(e) {
  e.stopPropagation();
});

